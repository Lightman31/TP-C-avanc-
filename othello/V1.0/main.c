#include <stdlib.h>#include <sys/types.h>#ifdef MINGW32// Libraries for Windows#include<winsock2.h>#include <windows.h> #else// Libraries for Linux#include <sys/socket.h>#include <netinet/in.h>#include <arpa/inet.h>#define INVALID_SOCKET -1#define SOCKET_ERROR -1#define closesocket(s) close(s)typedef int SOCKET;typedef struct sockaddr_in SOCKADDR_IN;typedef struct sockaddr SOCKADDR;typedef struct in_addr IN_ADDR;#endif#include <string.h>#include <stdio.h>#include <unistd.h>#include <stdbool.h>#include"connect.h"#include"reversi.h"#include"traitement.h"// messages constants#define BUFFER_SIZE 1024#define PORT 8888#define IP_SERVER 127.0.0.1#define MAX_CLIENT 1#define BLACK_PLAYER 0x01#define WHITE_PLAYER 0x02#define NOK_RESPONSE 0x00#define OK_RESPONSE 0x01#define SYNCRO 0x55#define FIELDSIZE 8typedef struct{    int port;    char name;}Client;typedef struct{    SOCKET sock;    char name[BUFFER_SIZE];}Cliente;int init_connection(void){    SOCKET sock_client;    SOCKADDR_IN server;	#ifdef MINGW32	WSADATA wsa;	// code for windows only    printf("\nInitialising Winsock...");    if(WSAStartup(MAKEWORD(2,2),&wsa) != 0)    {        printf("Failed. Error Code : %d",WSAGetLastError());        return 1;    }#endif    //Create socket    sock_client = socket(AF_INET, SOCK_STREAM, 0);    if (sock_client == INVALID_SOCKET) {        printf("Could not create socket");        exit (EXIT_FAILURE);    }    puts("Client Socket created");    // Define the socket remote address : 192.168.0.111:8888    server.sin_addr.s_addr = inet_addr("127.0.0.1");    server.sin_family = AF_INET;    server.sin_port = htons(PORT);    //Connect to remote server    if (connect(sock_client, (SOCKADDR *) &server, sizeof(server)) < 0) {        perror("connect failed. Error");        exit (EXIT_FAILURE);    }    puts("Connected\n");    return sock_client;}int connect_message(SOCKET sock, char *name){    //Variables locales    char message[100], server_reply[2000];    int e, i, playerColor;    char CRC = 0;    // Create the "Connect Message"    message[0] = SYNCRO;  // Synchro    message[1] = strlen(name)+1; // Message Length    message[2] = CONNECT_MESSAGE;  // Connect message    message[3] = strlen(name);  // Name Length    //Récupération du nom    for(i=4; i < (strlen(name)+4); i++)        message[i] = name[i-4];    //Calcul du CRC lors du choix du nom    for (e = 2; e < (strlen(name)+4); e++)        CRC += message[e];    message[strlen(name)+4] = CRC;    // Send "connect message" to the GM    sendMessage(sock, message, (strlen(name)+5));}//inet_addrint main(int argc, char *argv[]) {	int playerColor;	SOCKET sock_client = init_connection();		connect_message(sock_client, argv[1]);	while (1)	{		playerColor = get_message(sock_client, playerColor);	}	sleep(10);    return 0;}